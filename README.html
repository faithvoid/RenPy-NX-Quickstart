<!DOCTYPE html>
<html>
<head>
  <title>Ren'Py for Nintendo Switch</title>
</head>
<body>
<h1 id="ren-py-for-nintendo-switch">Ren&#39;Py for Nintendo Switch</h1>
<p>This repository contains a port of <a href="https://www.renpy.org/">Ren&#39;Py</a> to the Nintendo Switch.<br>Ren&#39;Py is a visual novel engine that is written using <a href="https://www.python.org/">Python</a>.<br>Discussion of this project is on the <a href="https://lemmasoft.renai.us/forums/viewtopic.php?f=32&amp;t=55503">Lemma Soft Forums</a>.  </p>
<h2 id="building">Building</h2>
<p>Please view the <code>external_library_build/Building.md</code> file for instructions on building this project, including the additional third party dependencies.  </p>
<h2 id="file-formats">File Formats</h2>
<p>It is highly recommended that you use the following file formats:  </p>
<ul>
<li>WebP for image assets</li>
<li>Opus/WebM for audio assets</li>
<li>VP8/Opus/Matroska for video assets</li>
<li>RPAv2 for game archives</li>
</ul>
<p>If these formats are not used, there is a possibility of the program working incorrectly or performance being impacted.<br>Free tools such as <a href="http://ffmpeg.org/">FFmpeg</a>, <a href="https://developers.google.com/speed/webp/docs/precompiled">cwebp</a>, and <a href="https://imagemagick.org/">ImageMagick</a> are available to convert file formats.<br><a href="https://github.com/Shizmob/rpatool">rpatool</a> can be used to create and merge RPA files, and also convert to RPAv2 format.<br>The file format can be changed without changing the file extension, so no script (<code>rpy</code> file) changes are needed.<br>The file <code>example.png</code> can be in the WebP file format without changing the filename to <code>example.webp</code>.  </p>
<h2 id="romfs-integration">RomFS Integration</h2>
<p>To integrate the game into one single <code>nro</code> file, place game files in a folder named <code>romfs</code>, and build as described in the &quot;Building&quot; section.<br>NOTE: If you do not compile the <code>py</code> and <code>rpy</code> files to <code>pyo</code> and <code>rpyc</code> respectively by running the game at least once on a read-write file system, the loading time required until the title screen is seen will be increased.<br>The <code>py_compile</code> module can be used to compile <code>py</code> files to <code>pyo</code>.<br>Example usage of this module:  </p>
<pre><code class="lang-bash">find . -name \*.py -exec python -O -m py_compile {} \;
</code></pre>
<h2 id="file-system-layout">File system layout</h2>
<p>The following files or folders are required to be in the same directory as the <code>.nro</code> or in RomFS:  </p>
<ul>
<li><code>lib.zip</code> - contains the Python stdlib, Ren&#39;Py modules, pygame_sdl2 modules, and libnx binding modules.</li>
<li><code>renpy</code> - contains the <code>common</code> directory used by Ren&#39;Py.</li>
<li><code>renpy.py</code> - startup script for Ren&#39;Py.</li>
<li><code>game</code> - contains the game files. This is where you place the game.</li>
</ul>
<h2 id="libnx-bindings">libnx bindings</h2>
<p>Ren&#39;Py for Nintendo Switch supports mostly complete <a href="https://github.com/switchbrew/libnx">libnx</a> bindings.<br>The bindings are generated by <a href="http://www.swig.org/">SWIG</a>.  </p>
<p>To use the bindings, you need to import the library <code>libnx</code>.  </p>
<pre><code class="lang-py">import libnx
</code></pre>
<p>To initialize a structure, you can use the following syntax:  </p>
<pre><code class="lang-py">clkrstSession = libnx.ClkrstSession()
</code></pre>
<p>To access members of a structure, you can use the following syntax:  </p>
<pre><code class="lang-py">service = clkrstSession.s
</code></pre>
<p>To access a enumeration, you can use the following syntax:  </p>
<pre><code class="lang-py">libnx.PcvModuleId_CpuBus
</code></pre>
<p>To call a function, you can use the following syntax:  </p>
<pre><code class="lang-py">libnx.clkrstOpenSession(clkrstSession, libnx.PcvModuleId_CpuBus, 3)
</code></pre>
<p>Example use cases of this feature:  </p>
<ul>
<li>Mounting game RomFS  </li>
<li>Creating save data on the system memory  </li>
<li>Opening a video in the web browser applet (with hardware acceleration)  </li>
<li>Opening the software keyboard applet  </li>
</ul>
<h2 id="available-python-native-modules">Available Python native modules</h2>
<p>The following native Python modules are available in Ren&#39;Py for Nintendo Switch:  </p>
<ul>
<li><code>_bisect</code></li>
<li><code>_codecs</code></li>
<li><code>_codecs_cn</code></li>
<li><code>_codecs_hk</code></li>
<li><code>_codecs_iso2022</code></li>
<li><code>_codecs_jp</code></li>
<li><code>_codecs_kr</code></li>
<li><code>_codecs_tw</code></li>
<li><code>_collections</code></li>
<li><code>_csv</code></li>
<li><code>_ctypes_test</code></li>
<li><code>_elementtree</code></li>
<li><code>_functools</code></li>
<li><code>_heapq</code></li>
<li><code>_hotshot</code></li>
<li><code>_io</code></li>
<li><code>_json</code></li>
<li><code>_locale</code></li>
<li><code>_lsprof</code></li>
<li><code>_md5</code></li>
<li><code>_multibytecodec</code></li>
<li><code>_random</code></li>
<li><code>_sha</code></li>
<li><code>_sha256</code></li>
<li><code>_sha512</code></li>
<li><code>_socket</code></li>
<li><code>_sre</code></li>
<li><code>_struct</code></li>
<li><code>_symtable</code></li>
<li><code>_testcapi</code></li>
<li><code>_weakref</code></li>
<li><code>array</code></li>
<li><code>audioop</code></li>
<li><code>binascii</code></li>
<li><code>bz2</code></li>
<li><code>cPickle</code></li>
<li><code>cStringIO</code></li>
<li><code>cmath</code></li>
<li><code>datetime</code></li>
<li><code>errno</code></li>
<li><code>fcntl</code></li>
<li><code>future_builtins</code></li>
<li><code>imageop</code></li>
<li><code>itertools</code></li>
<li><code>math</code></li>
<li><code>operator</code></li>
<li><code>parser</code></li>
<li><code>posix</code></li>
<li><code>pyexpat</code></li>
<li><code>strop</code></li>
<li><code>time</code></li>
<li><code>timing</code></li>
<li><code>unicodedata</code></li>
<li><code>xx</code></li>
<li><code>xxsubtype</code></li>
<li><code>zipimport</code></li>
<li><code>zlib</code></li>
</ul>
<h2 id="license">License</h2>
<p>This project is licensed under the MIT license. Please read the <code>LICENSE</code> file for more information.</p>
</body>
</html>
